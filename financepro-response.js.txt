export default function handler(req, res) {
  if (req.method !== 'POST') {
    return res.status(405).json({ message: 'Method not allowed' });
  }

  const { issue, preference } = req.body;

  const responses = {
    E405: {
      quick: `Try running the installer as administrator...`,
      detailed: `Thanks for choosing the detailed walkthrough...`
    },
    planUpgrade: {
      quick: `Perfect! Moving from 5 to 15 users...`,
      detailed: `Absolutely! I can help you upgrade...`
    },
    dataRecovery: {
      quick: `Good news! We can recover your deleted transaction data...`,
      detailed: `Don't worry - your data isn't permanently gone...`
    },
    billingDispute: {
      quick: `This sounds like you were accidentally charged...`,
      detailed: `I sincerely apologize for this billing error...`
    },
    integration: {
      quick: `Perfect! We have pre-built integrations...`,
      detailed: `Excellent question! We have robust pre-built integrations...`
    }
  };

  const message = responses[issue]?.[preference] || 'Sorry, I could not find a response for your request.';
  return res.status(200).json({ message });
}
